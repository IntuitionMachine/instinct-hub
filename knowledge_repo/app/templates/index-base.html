{% extends "base.html" %}


{% macro format_authors(authors) %}
  {% for author in authors %}
    <a href='/feed?authors={{ author.username|urlencode }}'>
      {{ author.format_name }}
    </a>
    {% if not loop.last %}
      ,
    {% endif %}
  {% endfor %}
{% endmacro %}

{% macro format_notebook(nb) %}
  {% set BASE_URL = 'http://159.65.38.105:8888/tree/work/' %}
  {% set url = BASE_URL + nb.split('.')[0] + '.ipynb' %}
    <a href='{{ url }}'>
      [ Run in Notebook ]
    </a>
{% endmacro %}



{% macro pagination(max_pages=10, extremes=True, autohide=True) %}
  {% if feed_params %}
    {% set start = feed_params['start'] | default(0) %}
    {% set results = feed_params['results'] | default(10) %}
    {% set page = 1 if (start == 0) else (start//results + 1) %}
    {% set page_count = feed_params['page_count'] | default(1) %}

    {% if autohide and page_count > 1 %}
      {% set page_nums = pagination_pages(current_page=page, page_count=page_count, max_pages=max_pages, extremes=extremes) %}

      <div class='pagination-bar' role="group">
        <a href="{{ "#" if (page == 1) else modify_query(start=(page-2)*results) }}" class="pagination-stepper{% if page == 1 %} disabled{% endif %}"{% if page == 1 %} onclick="return false;"{% endif %}>
          <i class="glyphicon glyphicon-chevron-left"></i>
        </a>
        <ul class="pagination">
          {% for page_num in page_nums %}
            {% if loop.index0 > 0 and page_num - page_nums[loop.index0 - 1] > 1 %}
              <li class="disabled"><a>&middot;&middot;&middot;</a></li>
            {% endif %}
            <li {% if page == page_num %}class="active"{% endif %}><a href= "{{ modify_query(start=(page_num-1)*results) }}"> {{ page_num }} </a></li>
          {% endfor %}
        </ul>
        <a href="{{ "#" if (page == page_count) else modify_query(start=page*results) }}" class="pagination-stepper{% if page == page_count %} disabled{% endif %}"{% if page == page_count %} onclick="return false;"{% endif %}>
          <i class="glyphicon glyphicon-chevron-right"></i>
        </a>
      </div>

    {% endif %}
  {% endif %}

{% endmacro %}

{% block title %} Knowledge Repo {% endblock %}

{% block content %}

<div class="row">
  <div class="left-bar col-lg-3">
    <h2>View</h2>
    <ul class="list-group text-light">
      <a href="/"><button type="button" class="btn btn-primary text-left" role="group">
              <span class="index-view-name"> Card </span>
            </button></a>
            <a href="/cluster"><button type="button" class="btn btn-primary text-left" role="group">
              <span class="index-view-name"> Cluster </span>
            </button></a>
          </ul>
          
    <br>
    {% block inner_cluster %}
    {% endblock %}

  </div>
  <div class="right-bar col-lg-9">
    
      {% block inner_content %}
      {% endblock %}
      {% if request.endpoint != 'index.render_cluster' %}
      <div class='text-center mt-3'>
        {{ pagination(max_pages=5, extremes=False) }}
      </div>
      {% endif %}
  </div>

</div>



  



{{ pagination(max_pages=10) }}
{% endblock %}



