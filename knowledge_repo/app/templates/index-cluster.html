{% extends "index-base.html" %}

{% block header %}

<text style="font-size:32px">Knowledge Clusters {% endblock %}</text>
{% block banner %}
<div  id="banner-feed">
    <div class="container">
        <div class="col-lg-6">
                <h1 style="color: white">All of AI in one place</h1>
                <p style="color: white">Instinct Hub is a platform to discover and deploy machine learning products, from experimentation to production</p>
                <button type="button" class="btn btn-raised btn-primary" onclick="location.href = '/view';">View Code</button>
                <button type="button" class="btn btn-primary" onclick="location.href = "http://www.knowledge-repo.readthedocs.io";">View Documentation</button>
        </div>
            
    </div>
  
  
  </div> 
  {% endblock %}

  {% block inner_cluster %}
  <div class="row cluster-header">
      <div class="col-md-12">
        <div class=" group-by-header">
          <h2> Group posts by:</h2>
        </div>
        <span class="col-md-3 group-by-options">
          <div class="radio-inline radio-cluster">
            <label>
              <input type="radio" name="cluster-radio" id="clusterFolder">Folder
            </label>
          </div>
          <div class="radio-inline radio-cluster">
            <label>
              <input type="radio" name="cluster-radio" id="clusterTags">Tags
            </label>
          </div>
          <div class="radio-inline radio-cluster">
            <label>
              <input type="radio" name="cluster-radio" id="clusterAuthor">Author
            </label>
          </div>
        </span>
  
        <div class="sort-by-header">
          <h2> Sort by:</h2>
        </div>
        <span class="col-md-3 sort-by-options">
          <div class="radio-inline radio-cluster">
            <label>
              <input type="radio" name="sort-radio" id="sortAlpha"> Alphabetically
            </label>
          </div>
          <div class="radio-inline radio-cluster">
            <label>
              <input type="radio" name="sort-radio" id="sortCount">Count
            </label>
          </div>
        </span>
      <div style="clear:both"></div>
      </div>
  
  
    </div>

  {% endblock %}

{% block inner_content %}
  <div class="container-fluid">

  
  

  <ul id="cluster_list">
  {% for cluster, contents in grouped_data %}
    {%- if contents|length > 0 and cluster|length > 0 %}
    {% set cluster_id = cluster|replace('/', '__')|replace(' ', '__')|replace('-', '__') %}
    <li>
    <div id="{{ cluster_id|safe }}">
      <h6 style="margin-bottom:0"> {{ [cluster,' (', contents|length, ')'] | join }}
        <i class="glyphicon glyphicon-chevron-right cluster-dropdown"></i>
      </h6>
    </div>
    </li>
      <div id="{{ cluster_id|safe }}-content" style="display:none">
        <ul>
        {% for item in contents %}
          <li>
            <a href="{{'/post/' + item.path|urlencode }}">
              {{ item.title|replace('_', ' ')|title }}
            </a>
          </li>
        {% endfor %}
        </ul>
     </div>
    {%- endif%}
  {% endfor %}
  </ul>
</div>
{% endblock %}

{% block scripts %}
{{ super() }}
<script src="{{ url_for('static', filename='js/index-cluster.js') }}"></script>
<script type="text/javascript">
$(document).ready(function() {
    var cluster_button = $(".btn-cluster")[0];
    $(cluster_button).addClass("btn-active");
    var glyphicon = $(".glyphicon-post-org.glyphicon-th-list")[0] ;
    $(glyphicon).addClass("glyphicon-active");

    var tag = "{{ tag |default('', true)}}";
    var clusterSelected = '#cluster{{ group_by|title }}';
    var sortSelected = '#sort{{ sort_by|title }}';
    var clusterButtons = ["clusterFolder", "clusterTags", "clusterAuthor"];
    var sortButtons = ["sortAlpha", "sortCount"];
    indexClusterJx.addFoldingToGroups();
    indexClusterJx.clickTag(tag);
    clusterSelected = indexClusterJx.getClusterSelected(clusterSelected);
    sortSelected = indexClusterJx.getSortSelected(sortSelected);
    $(clusterSelected)[0].setAttribute("checked", "checked")
    $(sortSelected)[0].setAttribute("checked", "checked")
    indexClusterJx.formatButtons(clusterSelected, clusterButtons, sortSelected, sortButtons);

    function search(){
      indexClusterJx.refreshPage(clusterSelected, sortSelected);
    }
  })
</script>
{% endblock %}
